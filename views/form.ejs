<%- include('partials/header') %>
<%- include('partials/nav') %>

<div class="container fade-in-up">
  <div class="card glass mb-4">
    <div class="card-body">
      <h2><i class="fas fa-<%= livro ? 'edit' : 'plus-circle' %>"></i> <%= livro ? 'Editar Livro' : 'Adicionar Novo Livro' %></h2>
      <p class="text-muted"><%= livro ? 'Atualize as informações do livro' : 'Preencha as informações do livro' %></p>
    </div>
  </div>

  <div class="card glass">
    <div class="card-body">
      <form method="POST" action="<%= livro && livro.id ? `/livros/editar/${livro.id}` : '/livros/novo' %>">
        <div class="row g-3">
          <!-- Título -->
          <div class="col-md-8">
            <label for="titulo" class="form-label">
              <i class="fas fa-book"></i> Título *
            </label>
            <input type="text" class="form-control" id="titulo" name="titulo" 
                   value="<%= livro ? livro.titulo : '' %>" required>
          </div>

          <!-- Ano -->
          <div class="col-md-4">
            <label for="ano" class="form-label">
              <i class="fas fa-calendar"></i> Ano
            </label>
            <input type="number" class="form-control" id="ano" name="ano" 
                   value="<%= livro ? livro.ano : '' %>" min="1000" max="2025">
          </div>

          <!-- Autor -->
          <div class="col-md-6">
            <label for="autor" class="form-label">
              <i class="fas fa-user"></i> Autor *
            </label>
            <input type="text" class="form-control" id="autor" name="autor" 
                   value="<%= livro ? livro.autor : '' %>" required>
          </div>

          <!-- Status -->
          <div class="col-md-6">
            <label for="status" class="form-label">
              <i class="fas fa-tasks"></i> Status *
            </label>
            <select class="form-select" id="status" name="status" required>
              <option value="">Selecione...</option>
              <option value="para_ler" <%= livro && livro.status === 'para_ler' ? 'selected' : '' %>>Para Ler</option>
              <option value="lendo" <%= livro && livro.status === 'lendo' ? 'selected' : '' %>>Lendo</option>
              <option value="lido" <%= livro && livro.status === 'lido' ? 'selected' : '' %>>Lido</option>
            </select>
          </div>

          <!-- Gênero -->
          <div class="col-md-6">
            <label for="genero" class="form-label">
              <i class="fas fa-tag"></i> Gênero
            </label>
            <input type="text" class="form-control" id="genero" name="genero" 
                   value="<%= livro ? livro.genero : '' %>">
          </div>

          <!-- Avaliação -->
          <div class="col-md-6">
            <label for="avaliacao" class="form-label">
              <i class="fas fa-star"></i> Avaliação
            </label>
            <select class="form-select" id="avaliacao" name="avaliacao">
              <option value="">Não avaliado</option>
              <option value="1" <%= livro && livro.avaliacao === 1 ? 'selected' : '' %>>⭐ 1 - Muito Ruim</option>
              <option value="2" <%= livro && livro.avaliacao === 2 ? 'selected' : '' %>>⭐⭐ 2 - Ruim</option>
              <option value="3" <%= livro && livro.avaliacao === 3 ? 'selected' : '' %>>⭐⭐⭐ 3 - Regular</option>
              <option value="4" <%= livro && livro.avaliacao === 4 ? 'selected' : '' %>>⭐⭐⭐⭐ 4 - Bom</option>
              <option value="5" <%= livro && livro.avaliacao === 5 ? 'selected' : '' %>>⭐⭐⭐⭐⭐ 5 - Excelente</option>
            </select>
          </div>

          <!-- Descrição -->
          <div class="col-12">
            <label for="descricao" class="form-label">
              <i class="fas fa-align-left"></i> Descrição
            </label>
            <textarea class="form-control" id="descricao" name="descricao" rows="3"><%= livro ? livro.descricao : '' %></textarea>
          </div>

          <!-- Botões -->
          <div class="col-12">
            <div class="d-flex gap-3 justify-content-end">
              <a href="/livros" class="btn btn-outline-secondary">
                <i class="fas fa-times"></i> Cancelar
              </a>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-<%= livro ? 'save' : 'plus' %>"></i> 
                <%= livro ? 'Atualizar Livro' : 'Adicionar Livro' %>
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<%- include('partials/footer') %> 