<%- include('partials/header') %>
<%- include('partials/nav') %>
<div class="container fade-in-up">
  <div class="card glass mb-4">
    <div class="card-body">
      <h2><i class="fas fa-user"></i> Meu Perfil</h2>
      <p class="text-muted">Atualize suas informações de usuário.</p>
    </div>
  </div>
  <div class="card glass">
    <div class="card-body">
      <% if (erros && erros.length > 0) { %>
        <div class="alert alert-danger">
          <ul class="mb-0">
            <% erros.forEach(function(erro) { %>
              <li><%= erro.msg %></li>
            <% }) %>
          </ul>
        </div>
      <% } %>
      <form method="POST" action="/usuarios/perfil" enctype="multipart/form-data">
        <div class="mb-3 text-center">
          <% if (user.avatar_url) { %>
            <img src="<%= user.avatar_url %>" alt="Avatar" class="rounded-circle mb-2" style="max-width: 120px; max-height: 120px;">
          <% } else { %>
            <i class="fas fa-user-circle fa-5x text-muted mb-2"></i>
          <% } %>
          <input type="file" class="form-control mt-2" id="avatar" name="avatar">
          <small class="form-text text-muted">Formatos aceitos: JPG, PNG. Tamanho máximo: 2MB.</small>
        </div>
        <div class="mb-3">
          <label for="nome" class="form-label"><i class="fas fa-user"></i> Nome</label>
          <input type="text" class="form-control" id="nome" name="nome" value="<%= user.nome %>" required>
        </div>
        <div class="mb-3">
          <label for="email" class="form-label"><i class="fas fa-envelope"></i> E-mail</label>
          <input type="email" class="form-control" id="email" name="email" value="<%= user.email %>" required>
        </div>
        <div class="mb-3">
          <label for="senha" class="form-label"><i class="fas fa-lock"></i> Nova Senha</label>
          <input type="password" class="form-control" id="senha" name="senha" placeholder="Deixe em branco para não alterar">
        </div>
        <button type="submit" class="btn btn-primary w-100">Salvar Alterações</button>
      </form>
    </div>
  </div>
</div>
<%- include('partials/footer') %> 